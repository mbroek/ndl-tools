# Makefile for the library files.
# $Id$

include ../Makefile.global

SRCS		= fgets.c xstr.c crc.c
OBJS		= fgets.o xstr.o crc.o
HDRS		= ndllib.h

OTHER		= Makefile
TARGET		= libndl.a

##########################################################################

.c.o:
		${CC} ${CFLAGS}	${INCLUDES} ${DEFINES} -c $<

all:		${TARGET}

libndl.a:	${OBJS}
		ar r $@ $?
		${RANLIB} $@

install:	all

clean:
		rm -f ${TARGET} *.o *.h~ *.c~ ftscprod.c core filelist Makefile.bak

filelist:	Makefile
		BASE=`pwd`; \
		BASE=`basename $${BASE}`; \
		(for f in ${SRCS} ${HDRS} ${OTHER} ;do echo ${PACKAGE}-${VERSION}/$${BASE}/$$f; done) >filelist

depend:
		@rm -f Makefile.bak; \
		mv Makefile Makefile.bak; \
		sed -e '/^# DO NOT DELETE/,$$d' Makefile.bak >Makefile; \
		${ECHO} '# DO NOT DELETE THIS LINE - MAKE DEPEND RELIES ON IT' >>Makefile; \
		${ECHO} '# Dependencies generated by make depend' >>Makefile; \
		for f in ${SRCS}; \
		do \
			${ECHO} "Dependencies for $$f:\c"; \
			${ECHO} "`basename $$f .c`.o:\c" >>Makefile; \
			for h in `sed -n -e \
				's/^#[  ]*include[      ]*"\([^"]*\)".*/\1/p' $$f`; \
			do \
				${ECHO} " $$h\c"; \
				${ECHO} " $$h\c" >>Makefile; \
			done; \
			${ECHO} " done."; \
			${ECHO} "" >>Makefile; \
		done; \
		${ECHO} '# End of generated dependencies' >>Makefile

# DO NOT DELETE THIS LINE - MAKE DEPEND RELIES ON IT
# Dependencies generated by make depend
fgets.o: ndllib.h ../config.h
xstr.o: ../config.h ndllib.h
crc.o: ../config.h ndllib.h
# End of generated dependencies
